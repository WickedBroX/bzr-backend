# ===========================================
# BZR Token Explorer - Backend Configuration
# ===========================================

# --- API Keys (REQUIRED) ---
# Get your API key from: https://etherscan.io/myapikey
ETHERSCAN_V2_API_KEY=your_etherscan_api_key_here

# Cronos API key (optional - Cronos is currently excluded from holders endpoint)
CRONOS_API_KEY=your_cronos_api_key_here

# --- Token Configuration (REQUIRED) ---
# BZR Token Contract Address
BZR_TOKEN_ADDRESS=0x85Cb098bdcD3Ca929d2cD18Fc7A2669fF0362242

# --- Server Configuration ---
# Port for the backend server
PORT=3001

# Node environment (development, production)
NODE_ENV=production

# --- Security Configuration ---
# Comma-separated list of allowed origins for CORS
# Example: https://yourdomain.com,https://www.yourdomain.com
# Use * to allow all origins (NOT recommended for production)
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# --- API Provider Configuration ---
# Etherscan V2 API base URL
API_V2_BASE_URL=https://api.etherscan.io/v2/api

# Cronos Explorer API base URL
CRONOS_API_BASE_URL=https://explorer-api.cronos.org/mainnet/api/v2

# --- Rate Limiting & Performance ---
# Maximum concurrent requests to Etherscan API
ETHERSCAN_CONCURRENCY=3

# Cache warming interval in milliseconds (0 to disable)
CACHE_WARM_INTERVAL_MS=90000

# Cronos specific settings
CRONOS_LOG_BLOCK_RANGE=9999
CRONOS_LOG_MAX_ITERATIONS=12

# --- Persistent Store (Postgres) ---
# Either provide a full connection string or the discrete host/user settings below.
# TRANSFERS_DATABASE_URL=postgres://username:password@db-host:5432/bzr_transfers
# TRANSFERS_DB_HOST=localhost
# TRANSFERS_DB_PORT=5432
# TRANSFERS_DB_NAME=bzr_transfers
# TRANSFERS_DB_USER=bzr
# TRANSFERS_DB_PASSWORD=replace_me

# Enable the persistent store-backed API and ingestion pipeline.
TRANSFERS_DATA_SOURCE=store

# Threshold (in seconds) after which snapshot data is considered stale.
TRANSFERS_STALE_THRESHOLD_SECONDS=900

# --- Ingestion Supervisor (bzr-ingester) ---
# Controls the cadence and concurrency of the transfer ingestion worker.
TRANSFERS_INGEST_INTERVAL_MS=30000
TRANSFERS_INGEST_MAX_PAGES=5
TRANSFERS_INGEST_CONCURRENCY=2
INGESTER_SUPERVISOR=systemd

# --- Token Price Configuration ---
# CoinGecko token ID for price fetching
TOKEN_PRICE_COINGECKO_ID=bazaars

# CoinGecko API timeout in milliseconds
TOKEN_PRICE_COINGECKO_TIMEOUT_MS=5000

# ===========================================
# DEPLOYMENT NOTES:
# ===========================================
# 1. Copy this file to .env and fill in your actual values
# 2. NEVER commit .env to version control
# 3. For production, set NODE_ENV=production
# 4. Update ALLOWED_ORIGINS with your actual domain(s)
# 5. Keep API keys secure and rotate them periodically
